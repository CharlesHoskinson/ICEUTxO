\* Starstream TLA+ Configuration for TLC Model Checker
\* Use: tlc MC_Starstream.tla -config Starstream.cfg

\* ============================================================================
\* SPECIFICATION
\* ============================================================================
\* SPECIFICATION MC_Spec

\* For L1/L2 liveness checking, use:
SPECIFICATION MC_FairSpec

\* ============================================================================
\* CONSTANTS
\* ============================================================================
CONSTANTS
    MAX_UTXOS = 3
    MAX_TX_INPUTS = 2
    MAX_TX_OUTPUTS = 2
    MAX_FRAME_VARS = 4
    MAX_PENDING_TXS = 2
    MAX_TOKEN_TOTAL = 4
    UTXO_ID_BOUND = 8
    CHAIN_ID = 1
    BLOCK_HEIGHT = 0
    TOKEN_TYPES = {"ADA", "NFT"}
    TOKEN_IDS = {1, 2, 3}
    MAX_COORDINATORS = 2
    MAX_INTERFACES = 3
    MAX_HANDLER_DEPTH = 2
    MAX_EFFECT_FUEL = 5

\* ============================================================================
\* CONSTRAINT
\* ============================================================================
CONSTRAINT MC_StateConstraint

\* ============================================================================
\* INVARIANTS (Safety Properties)
\* ============================================================================
INVARIANTS
    MC_TypeOK
    MC_NoDoubleSpend
    MC_BalancePreserved
    MC_ConsumedTracked
    MC_ConsumedIsFinal
    MC_EffectsMustBeHandled
    MC_NoReplay
    MC_PendingInputsNotConsumed
    MC_EffectSourceSuspended
    MC_EffectContinuationMatch
    MC_EffectStackDepthBounded
    MC_PendingOutputsNoNFTDuplication
    MC_LockAtomicRelease
    MC_NoOverflow
    \* Handler stack invariants (IVC alignment)
    MC_EffectInterfaceConsistent
    MC_EffectPerInterfaceDepth
    MC_EffectValidHandlerStacks
    \* Effect termination invariants
    MC_EffectFuelBounded
    MC_EffectPotentialBounded
    \* Proof invariants (IVC alignment)
    MC_ProofIntegrityBound
    MC_ProofNoDoubleProof
    MC_ProofVerificationInvariant
    MC_ProofConsistentPhase
    MC_ProofActiveProofsConsistent
    MC_ProofValidIVCConfig
    MC_Safety

\* ============================================================================
\* PROPERTIES (Liveness - requires FairSpec)
\* ============================================================================
\* Uncomment when using MC_FairSpec (or MC_StrongFairSpec for effects):
PROPERTIES
    MC_TxCommits
    MC_TxTerminates
    MC_IdleReachable

\* For L3 (effect-handling) liveness, switch to:
\* SPECIFICATION MC_StrongFairSpec
\* PROPERTIES
\*     MC_EffectsHandled

\* ============================================================================
\* SYMMETRY (Performance Optimization)
\* ============================================================================
\* SYMMETRY TokenTypeSymmetry

\* ============================================================================
\* CHECK DEADLOCKS
\* ============================================================================
CHECK_DEADLOCK FALSE

\* ============================================================================
\* ACTION CONSTRAINT (Optional)
\* ============================================================================
\* ACTION_CONSTRAINT MC_ActionConstraint
